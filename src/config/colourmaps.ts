/**
 * Colourmap definitions for data visualisation
 * Each colourmap defines colour ramps and underflow/overflow colours
 */

import * as THREE from 'three'

export interface Colourmap {
  name: string
  // Control points: array of RGB colours (0-1 range)
  colors: THREE.Vector3[]
  // Colour for values below the minimum range
  underflowColour: THREE.Vector3
  // Colour for values above the maximum range
  overflowColour: THREE.Vector3
}

/**
 * Fast colourmap - 32 control points for wide gamut and extended discrimination
 * Data from Moreland's Fast colourmap
 * Good for: Temperature, continuous data with distinct features
 */
export const COLOURMAP_FAST: Colourmap = {
  name: 'fast',
  colors: [
    new THREE.Vector3(0.05639932216773367, 0.056399092153948, 0.4700000908789252),
    new THREE.Vector3(0.11062118079323027, 0.1380849483224675, 0.5318811940715031),
    new THREE.Vector3(0.15062834225956712, 0.2122970107362595, 0.5947551775157331),
    new THREE.Vector3(0.18364776204016361, 0.28582408330692705, 0.6585723468980588),
    new THREE.Vector3(0.21181580762686186, 0.36018628717252055, 0.723291561166658),
    new THREE.Vector3(0.2360260502066791, 0.4358696051302966, 0.7888773509714441),
    new THREE.Vector3(0.267625116022063, 0.5083081607706341, 0.8350281801403023),
    new THREE.Vector3(0.299465177629453, 0.5797542700808809, 0.8717621559957862),
    new THREE.Vector3(0.32712079411491907, 0.6523755202804778, 0.9084510967262647),
    new THREE.Vector3(0.3512259015236105, 0.7261574853335666, 0.9450952510932998),
    new THREE.Vector3(0.43259949308056317, 0.7774846818972193, 0.9484812495789637),
    new THREE.Vector3(0.5182455112269085, 0.8215939429675145, 0.9401532282112622),
    new THREE.Vector3(0.5934960027213793, 0.8663909235918918, 0.9312813400678497),
    new THREE.Vector3(0.6622681009426095, 0.9118331985033377, 0.9218254834134191),
    new THREE.Vector3(0.7567155629708813, 0.9342020135461144, 0.87542938939741),
    new THREE.Vector3(0.8552551162202264, 0.9411667420787914, 0.8045038976467505),
    new THREE.Vector3(0.9137962604822488, 0.924270570873576, 0.7211958107780932),
    new THREE.Vector3(0.9369921574114255, 0.8836812571866447, 0.6264560093359551),
    new THREE.Vector3(0.9539324119899434, 0.8432846209187139, 0.531408480407559),
    new THREE.Vector3(0.9534516720681238, 0.789549848191143, 0.467841913400552),
    new THREE.Vector3(0.9465758462825115, 0.7316223955774923, 0.4146496642068541),
    new THREE.Vector3(0.9374475033003385, 0.6735004931047588, 0.3619568066943428),
    new THREE.Vector3(0.9245647500491415, 0.6148545383132992, 0.3113167841796553),
    new THREE.Vector3(0.8970517755591756, 0.5546951612479929, 0.2748146276825057),
    new THREE.Vector3(0.8685551960480525, 0.49413078643328173, 0.2389732264611919),
    new THREE.Vector3(0.839074560826857, 0.43274518533936923, 0.20382337636329811),
    new THREE.Vector3(0.8086084101977041, 0.3698342833209696, 0.16939757383932763),
    new THREE.Vector3(0.7676278529327417, 0.315264653443075, 0.15429163686512834),
    new THREE.Vector3(0.72300106561469, 0.26344676525169936, 0.14610655130616268),
    new THREE.Vector3(0.6785270372029161, 0.20934429344113736, 0.13757932265353492),
    new THREE.Vector3(0.6341969500479122, 0.1502395759815047, 0.12870449492087047),
    new THREE.Vector3(0.5900001145322249, 0.07669636770019067, 0.11947505935767005),
  ],
  underflowColour: new THREE.Vector3(0.0, 0.0, 0.2), // Navy blue
  overflowColour: new THREE.Vector3(1.0, 0.0, 1.0), // Magenta
}

/**
 * Greyscale colourmap - simple black to white
 * Good for: Elevation, water depth, and other neutral data
 */
export const COLOURMAP_GREYSCALE: Colourmap = {
  name: 'greyscale',
  colors: [
    new THREE.Vector3(0.0, 0.0, 0.0),   // Black
    new THREE.Vector3(1.0, 1.0, 1.0),   // White
  ],
  underflowColour: new THREE.Vector3(0.0, 0.0, 0.2), // Navy blue for underflow
  overflowColour: new THREE.Vector3(1.0, 0.0, 1.0), // Magenta for overflow
}

/**
 * Water depth colourmap ("BlueB1" via https://sciviscolor.org/)
 * 
 */

export const COLOURMAP_WATERDEPTH: Colourmap = {
  name: 'waterdepth',
  colors: [
    new THREE.Vector3(0.882353, 0.980392, 0.964706), // x=0.0
    new THREE.Vector3(0.690196, 0.921569, 0.913725), // x=0.1
    new THREE.Vector3(0.552941, 0.823529, 0.850980), // x=0.2
    new THREE.Vector3(0.478431, 0.737255, 0.800000), // x=0.3
    new THREE.Vector3(0.384314, 0.596078, 0.701961), // x=0.4
    new THREE.Vector3(0.321569, 0.490196, 0.639216), // x=0.5
    new THREE.Vector3(0.262745, 0.392157, 0.580392), // x=0.6
    new THREE.Vector3(0.207843, 0.301961, 0.521569), // x=0.7
    new THREE.Vector3(0.156863, 0.207843, 0.450980), // x=0.8
    new THREE.Vector3(0.121569, 0.145098, 0.400000), // x=0.9
    new THREE.Vector3(0.098039, 0.086275, 0.349020), // x=1.0
  ],
  underflowColour: new THREE.Vector3(0.0, 0.0, 0.0),
  overflowColour: new THREE.Vector3(0.0, 1.0, 1.0),
}

/**
 * Salinity colourmap ("c16" via https://sciviscolor.org/)
 */
export const COLOURMAP_SALINITY: Colourmap = {
  name: 'salinity',
  colors: [
    new THREE.Vector3(0.949020, 1.000000, 0.980392),
    new THREE.Vector3(0.901961, 1.000000, 0.949020),
    new THREE.Vector3(0.831373, 0.980392, 0.917647),
    new THREE.Vector3(0.768627, 0.960784, 0.894118),
    new THREE.Vector3(0.698039, 0.929412, 0.862745),
    new THREE.Vector3(0.639216, 0.901961, 0.843137),
    new THREE.Vector3(0.588235, 0.870588, 0.827451),
    new THREE.Vector3(0.541176, 0.831373, 0.803922),
    new THREE.Vector3(0.501961, 0.8     , 0.796078),
    new THREE.Vector3(0.454902, 0.745098, 0.760784),
    new THREE.Vector3(0.419608, 0.694118, 0.729412),
    new THREE.Vector3(0.380392, 0.631373, 0.690196),
    new THREE.Vector3(0.345098, 0.580392, 0.658824),
    new THREE.Vector3(0.317647, 0.525490, 0.619608),
    new THREE.Vector3(0.305882, 0.470588, 0.580392),
    new THREE.Vector3(0.290196, 0.415686, 0.529412),
    new THREE.Vector3(0.278431, 0.352941, 0.470588),
    new THREE.Vector3(0.258824, 0.298039, 0.400000),
    new THREE.Vector3(0.235294, 0.247059, 0.329412),
    new THREE.Vector3(0.180392, 0.176471, 0.231373),
  ],
  underflowColour: new THREE.Vector3(0.0, 0.0, 0.0), // NaN/fallback colour (matches XML <NaN>)
  overflowColour: new THREE.Vector3(1.0, 0.0, 1.0),
}

/**
 * Albedo colourmap, greyscale
 * Dark blue underflow (should not happen)
 * Magenta overflow (should not happen)
 */
export const COLOURMAP_ALBEDO: Colourmap = {
  name: 'albedo',
  colors: [
    new THREE.Vector3(0.0, 0.0, 0.0),   // Black - low albedo
    new THREE.Vector3(1.0, 1.0, 1.0),   // White - high albedo
  ],
  underflowColour: new THREE.Vector3(0.0, 0.0, 0.5),
  overflowColour: new THREE.Vector3(1.0, 0.0, 1.0),
}

/**
 * Ice thickness colourmap ("sd" via CCC-Tool, interpolationspace="lab")
 * Replaces old "Vlt_turq2" with updated, smoother blue-turquoise colormap.
 * Black underflow, black overflow (per XML <Above>/<Below>/<NaN>)
 */
export const COLOURMAP_ICE: Colourmap = {
  name: 'ice',
  colors: [
    new THREE.Vector3(0.3793034661181724, 0.34040789975053165, 0.7508803052488114),
    new THREE.Vector3(0.3976325589792201, 0.36766544376408467, 0.7680401253342565),
    new THREE.Vector3(0.4156228154081329, 0.3949957866583141, 0.7852253846352517),
    new THREE.Vector3(0.43330864085682713, 0.42242270381844443, 0.8024358462287073),
    new THREE.Vector3(0.4507187072297352, 0.4499637359687955, 0.8196713036101766),
    new THREE.Vector3(0.4678771876257229, 0.47763189848429516, 0.8369315816810977),
    new THREE.Vector3(0.4848046674251862, 0.5054368555932399, 0.8542165322366401),
    new THREE.Vector3(0.5015188348032825, 0.5333857536594, 0.8715260300839889),
    new THREE.Vector3(0.5040038984562412, 0.5375829917347249, 0.8741197228842384),
    new THREE.Vector3(0.5170885938006982, 0.5525019141601941, 0.882853961753396),
    new THREE.Vector3(0.5323785995494978, 0.5701277769082589, 0.893128744041837),
    new THREE.Vector3(0.5475718497453869, 0.5878391347331349, 0.9034063154913805),
    new THREE.Vector3(0.5626776403350616, 0.6056349913772506, 0.9136866720322696),
    new THREE.Vector3(0.5777042443113116, 0.6235143659268424, 0.9239698128904126),
    new THREE.Vector3(0.5926590543077891, 0.6414762936102514, 0.9342557402918829),
    new THREE.Vector3(0.6075487011892828, 0.6595198263679894, 0.9445444591913483),
    new THREE.Vector3(0.6223791533395194, 0.6776440332366411, 0.954835977022395),
    new THREE.Vector3(0.637155800305016, 0.6958480005809768, 0.9651303034679236),
    new THREE.Vector3(0.6518835236673065, 0.7141308322024855, 0.9754274502489376),
    new THREE.Vector3(0.6580562820012059, 0.7218336643657571, 0.979753528291785),
    new THREE.Vector3(0.6643195737343167, 0.726026782802202, 0.9807763715297279),
    new THREE.Vector3(0.6750628468312442, 0.7332708714853562, 0.9825348979380667),
    new THREE.Vector3(0.6857382783269689, 0.7405326716817371, 0.9842869193968725),
    new THREE.Vector3(0.6963495956269842, 0.7478120120517, 0.9860324105350652),
    new THREE.Vector3(0.7069002683726267, 0.7551087252401065, 0.9877713461126013),
    new THREE.Vector3(0.7173935316224211, 0.7624226477436774, 0.9895037010164395),
    new THREE.Vector3(0.7278324064630498, 0.7697536197837083, 0.9912294502565687),
    new THREE.Vector3(0.7350553804708115, 0.7748574819978237, 0.9924246896404804),
    new THREE.Vector3(0.7384989166061473, 0.7776590922595487, 0.9926091935075861),
    new THREE.Vector3(0.7497324708884542, 0.7868564831508208, 0.9932046273064109),
    new THREE.Vector3(0.7608904882492469, 0.7960787031666257, 0.993785870239586),
    new THREE.Vector3(0.7719768150767568, 0.8053254722820444, 0.9943528124573499),
    new THREE.Vector3(0.782995041680365, 0.8145965185193306, 0.9949053436427951),
    new THREE.Vector3(0.7939485245964756, 0.8238915776110411, 0.9954433529918155),
    new THREE.Vector3(0.8048404064940475, 0.8332103926803731, 0.9959667291928435),
    new THREE.Vector3(0.8156736339858098, 0.8425527139376939, 0.9964753604063591),
    new THREE.Vector3(0.8264509736063077, 0.8519182983923415, 0.9969691342441632),
    new THREE.Vector3(0.837175026180444, 0.8613069095788173, 0.9974479377484154),
    new THREE.Vector3(0.8478482397748167, 0.87071831729655, 0.9979116573704113),
    new THREE.Vector3(0.8584729213976448, 0.8801522973624692, 0.9983601789491005),
    new THREE.Vector3(0.8690512475907817, 0.8896086313756596, 0.9987933876893348),
    new THREE.Vector3(0.8795852740383322, 0.8990871064934212, 0.9992111681398302),
    new THREE.Vector3(0.8900769443002639, 0.9085875152181073, 0.9996134041708363),
    new THREE.Vector3(0.9005281293207135, 0.9181095973202068, 0.9999999849571296)
  ],
  underflowColour: new THREE.Vector3(0.0, 0.0, 0.0),
  overflowColour: new THREE.Vector3(1.0, 1.0, 1.0),
}

